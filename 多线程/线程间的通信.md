##### 线程间的通信

在 iOS 开发过程中，一般在主线程里边进行 UI 刷新，例如：点击、滚动、拖拽等事件。通常把一些耗时的操作放在其他线程，比如说图片下载、文件上传等耗时操作。而当有时候在其他线程完成了耗时操作时，需要回到主线程，那么就用到了线程之间的通讯。

##### 1、GCD

```
- (void)communication {
    // 获取全局并发队列
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); 
    // 获取主队列
    dispatch_queue_t mainQueue = dispatch_get_main_queue(); 

    dispatch_async(queue, ^{
        // 异步追加任务
        for (int i = 0; i < 2; ++i) {
            [NSThread sleepForTimeInterval:2];              // 模拟耗时操作
            NSLog(@"1---%@",[NSThread currentThread]);      // 打印当前线程
        }

        // 回到主线程
        dispatch_async(mainQueue, ^{
            // 追加在主线程中执行的任务
            [NSThread sleepForTimeInterval:2];              // 模拟耗时操作
            NSLog(@"2---%@",[NSThread currentThread]);      // 打印当前线程
        });
    });
}
```
